<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=content-language content="en">
<meta name=color-scheme content="light dark">
<meta name=author content="KK">
<meta name=description content="After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader app, so you can read RSS on all of you devices.
This post will tell you how to deploy it on your server.
Prerequisite    You need to install Docker and Docker Compose before using docker-compose.">
<meta name=keywords content="fromkk,blog,kk blog,developer,personal,python,golang,go,linux,machine learning">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Build Your Own Tiny Tiny RSS Service">
<meta name=twitter:description content="After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader app, so you can read RSS on all of you devices.
This post will tell you how to deploy it on your server.
Prerequisite    You need to install Docker and Docker Compose before using docker-compose.">
<meta property="og:title" content="Build Your Own Tiny Tiny RSS Service">
<meta property="og:description" content="After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader app, so you can read RSS on all of you devices.
This post will tell you how to deploy it on your server.
Prerequisite    You need to install Docker and Docker Compose before using docker-compose.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-06-10T00:25:00+08:00">
<meta property="article:modified_time" content="2022-01-19T22:43:58+08:00">
<title>
Build Your Own Tiny Tiny RSS Service · KK's Blog (fromkk)
</title>
<link rel=canonical href=https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/>
<link rel=preload href="https://www.fromkk.com/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin>
<link rel=stylesheet href=https://www.fromkk.com/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css integrity="sha256-2f3b/+byfmmYXcX+BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin=anonymous media=screen>
<link rel=stylesheet href=https://www.fromkk.com/css/coder-dark.min.002ee2378e14c7a68f1f0a53d9694ed252090987c4e768023fac694a4fc5f793.css integrity="sha256-AC7iN44Ux6aPHwpT2WlO0lIJCYfE52gCP6xpSk/F95M=" crossorigin=anonymous media=screen>
<link rel=icon type=image/png href=https://www.fromkk.com/icons/icon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=https://www.fromkk.com/icons/icon-16x16.png sizes=16x16>
<link rel=apple-touch-icon href=https://www.fromkk.com/icons/icon-192x192.png>
<link rel=apple-touch-icon sizes=180x180 href=https://www.fromkk.com/icons/icon-192x192.png>
<meta name=generator content="Hugo 0.92.0">
</head>
<body class="preload-transitions colorscheme-auto">
<div class=float-container>
<a id=dark-mode-toggle class=colorscheme-toggle>
<i class="fa fa-adjust fa-fw" aria-hidden=true></i>
</a>
</div>
<main class=wrapper>
<nav class=navigation>
<section class=container>
<a class=navigation-title href=https://www.fromkk.com/>
KK's Blog (fromkk)
</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle>
<i class="fa fa-bars fa-fw" aria-hidden=true></i>
</label>
<ul class=navigation-list>
<li class=navigation-item>
<a class=navigation-link href=https://www.fromkk.com/posts/>Blog</a>
</li>
<li class=navigation-item>
<a class=navigation-link href=https://www.fromkk.com/tags/>Tags</a>
</li>
<li class=navigation-item>
<a class=navigation-link href=https://www.fromkk.com/about/>About</a>
</li>
<li class=navigation-item>
<a class=navigation-link href=https://www.fromkk.com/posts/index.xml>RSS</a>
</li>
</ul>
</section>
</nav>
<div class=content>
<section class="container post">
<article>
<header>
<div class=post-title>
<h1 class=title>
<a class=title-link href=https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/>
Build Your Own Tiny Tiny RSS Service
</a>
</h1>
</div>
<div class=post-meta>
<div class=date>
<span class=posted-on>
<i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2019-06-10T00:25:00+08:00>
06/10/2019
</time>
</span>
<span class=reading-time>
<i class="fa fa-clock-o" aria-hidden=true></i>
3-minute read
</span>
</div>
</div>
</header>
<div>
<p>After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader app, so you can read RSS on all of you devices.</p>
<p>This post will tell you how to deploy it on your server.</p>
<h2 id=prerequisite>
Prerequisite
<a class=heading-link href=#prerequisite>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<p>You need to install <a href=https://docs.docker.com/install/>Docker</a> and <a href=https://docs.docker.com/compose/install/>Docker Compose</a> before using <code>docker-compose.yml</code></p>
<h2 id=install-docker>
Install docker
<a class=heading-link href=#install-docker>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<p>Make a new <code>ttrss</code> folder, create <code>docker-compose.yml</code> with this content:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
<span style=color:#f92672>services</span>:
  <span style=color:#f92672>database.postgres</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>sameersbn/postgresql:latest</span>
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>postgres</span>
    <span style=color:#f92672>environment</span>:
      - <span style=color:#ae81ff>PG_PASSWORD=PWD</span> <span style=color:#75715e># please change the password</span>
      - <span style=color:#ae81ff>DB_EXTENSION=pg_trgm</span>
    <span style=color:#f92672>volumes</span>:
      - <span style=color:#ae81ff>~/postgres/data/:/var/lib/postgresql/</span> <span style=color:#75715e># persist postgres data to ~/postgres/data/ on the host</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>5433</span>:<span style=color:#ae81ff>5432</span>
    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>

  <span style=color:#f92672>service.rss</span>:
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>wangqiru/ttrss:latest</span>
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>ttrss</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>181</span>:<span style=color:#ae81ff>80</span>
    <span style=color:#f92672>environment</span>:
      - <span style=color:#ae81ff>SELF_URL_PATH=https://RSS.com/</span> <span style=color:#75715e># please change to your own domain</span>
      - <span style=color:#ae81ff>DB_HOST=database.postgres</span>
      - <span style=color:#ae81ff>DB_PORT=5432</span>
      - <span style=color:#ae81ff>DB_NAME=ttrss</span>
      - <span style=color:#ae81ff>DB_USER=postgres</span>
      - <span style=color:#ae81ff>DB_PASS=PWD</span> <span style=color:#75715e># please change the password</span>
      - <span style=color:#ae81ff>ENABLE_PLUGINS=auth_internal,fever,api_newsplus</span> <span style=color:#75715e># auth_internal is required. Plugins enabled here will be enabled for all users as system plugins</span>
      - <span style=color:#ae81ff>SESSION_COOKIE_LIFETIME = 8760</span>
    <span style=color:#f92672>stdin_open</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
    <span style=color:#f92672>command</span>: <span style=color:#ae81ff>sh -c &#39;sh /wait-for.sh database.postgres:5432 -- php /configure-db.php &amp;&amp; exec s6-svscan /etc/s6/&#39;</span>

  <span style=color:#f92672>service.mercury</span>: <span style=color:#75715e># set Mercury Parser API endpoint to =service.mercury:3000= on TTRSS plugin setting page</span>
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>wangqiru/mercury-parser-api:latest</span>
    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>mercury</span>
    <span style=color:#f92672>expose</span>:
      - <span style=color:#ae81ff>3000</span>
    <span style=color:#f92672>ports</span>:
      - <span style=color:#ae81ff>3000</span>:<span style=color:#ae81ff>3000</span>
    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</code></pre></div><p>Run this command to deploy: <code>docker-compose up -d</code>. After it finished, the TTRSS service is running on port <code>181</code>, the default account is <code>admin</code> with password <code>password</code>.</p>
<p>I made minor modification on the yml file, you can find the latest file <a href=https://github.com/HenryQW/Awesome-TTRSS>here</a>.</p>
<h2 id=nginx-configuration>
Nginx Configuration
<a class=heading-link href=#nginx-configuration>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<p>If you have a domain and you can use Nginx as reverse proxy to redirect TTRSS to the domain.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>upstream ttrssdev {
    server 127.0.0.1:181;
}

server {
    listen 80;
    server_name  RSS.com;
    return 301 https://RSS.com/$request_uri;
}

server {
    listen 443 ssl;
    gzip on;
    server_name  RSS.com;


    access_log /var/log/nginx/ttrssdev_access.log combined;
    error_log  /var/log/nginx/ttrssdev_error.log;

    location / {
        proxy_redirect off;
        proxy_pass http://ttrssdev;

        proxy_set_header  Host                $http_host;
        proxy_set_header  X-Real-IP           $remote_addr;
        proxy_set_header  X-Forwarded-Ssl     on;
        proxy_set_header  X-Forwarded-For     $proxy_add_x_forwarded_for;
        proxy_set_header  X-Forwarded-Proto   $scheme;
        proxy_set_header  X-Frame-Options     SAMEORIGIN;

        client_max_body_size        100m;
        client_body_buffer_size     128k;

        proxy_buffer_size           4k;
        proxy_buffers               4 32k;
        proxy_busy_buffers_size     64k;
        proxy_temp_file_write_size  64k;
    }
    ssl_certificate /etc/letsencrypt/live/rss.fromkk.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/rss.fromkk.com/privkey.pem; # managed by Certbot

}
</code></pre></div><p>To enable HTTPS on your website, you can use <a href=https://certbot.eff.org>certbot</a>.</p>
<h2 id=caddy-configuration>
Caddy Configuration
<a class=heading-link href=#caddy-configuration>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<p>Update in 22/12/2021</p>
<p>I found Caddy2 is much easier to use than Nginx, all you need to do is add 3 lines in `/etc/caddy/Caddyfile`</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>rss.com {
encode gzip zstd
reverse_proxy  127.0.0.1:181
}
</code></pre></div><p>Voila, a HTTPS enabled website is deployed.</p>
<h2 id=fever-api-and-mercury>
Fever API and Mercury
<a class=heading-link href=#fever-api-and-mercury>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<ul>
<li>Fever
<ol>
<li>Check <code>Enable API: Allows accessing this account through the API</code> in preference</li>
<li>Enter a new password for fever in <code>Plugins - Fever Emulation</code></li>
</ol>
</li>
<li>Mecury Fulltext Extraction
<ol>
<li>Check <code>mecury-fulltext</code> plugin in <code>Preference - Plugins</code></li>
<li>Set Mercury Parser API address to <code>service.mercury:3000</code> in <code>Feeds - Mercury Fulltext settings</code></li>
</ol>
</li>
</ul>
<h2 id=update>
Update
<a class=heading-link href=#update>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<p>Simply run this command to update TTRSS code.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>docker-compose pull
docker-compose up -d
</code></pre></div><h2 id=app-recommendation>
App recommendation
<a class=heading-link href=#app-recommendation>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<p><a href=https://reederapp.com>Reeder 4</a> works great on my iPad. It&rsquo;s smooth and fast, and is worth every penny.</p>
<p>If you want a free app, I suggest <a href=http://cocoacake.net/apps/fiery/>Fiery Feeds</a>. I stopped using it after ver 2.2, as it&rsquo;s so lagging. If this issue was fixed, I thought it was the biggest competitor for Reeder 4. For more alternative, read this article: <a href=https://thesweetsetup.com/apps/best-rss-app-ipad/>The Best RSS App for iPhone and iPad</a>.</p>
<ul>
<li>update 25-03-20:</li>
</ul>
<p>You can find the latest document <a href=https://ttrss.henry.wang>here</a>.</p>
<h2 id=ref>
Ref:
<a class=heading-link href=#ref>
<i class="fa fa-link" aria-hidden=true></i>
</a>
</h2>
<ol>
<li><a href=https://henry.wang/2018/04/25/ttrss-docker-plugins-guide.html>A ttrss setup guide - Start your own RSS aggregator today</a></li>
</ol>
</div>
<footer>
<script src=https://utteranc.es/client.js repo=bebound/bebound.github.io issue-term=pathname label=comment theme=preferred-color-scheme crossorigin=anonymous async></script>
</footer>
</article>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload="renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:!0},{left:'$',right:'$',display:!1},{left:'\\(',right:'\\)',display:!1},{left:'\\[',right:'\\]',display:!0}]})"></script>
</section>
</div>
<footer class=footer>
<section class=container>
©
2022
KK
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.
</section>
</footer>
</main>
<script src=https://www.fromkk.com/js/coder.min.03b17769f4f91ae35667e1f2a1ca8c16f50562576cf90ff32b3179926914daa5.js integrity="sha256-A7F3afT5GuNWZ+HyocqMFvUFYlds+Q/zKzF5kmkU2qU="></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-153788833-1','auto'),ga('send','pageview'))</script>
</body>
</html>