<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=author content="KK"><meta name=description content="After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader APP, so you can read RSS on all of you devices.
This post will tell you how to deploy it on your server.
Prerequisite You need to install Docker and Docker Compose before using docker-compose."><meta name=keywords content="fromkk,blog,kk blog,developer,personal,python,golang,go,linux,machine learning"><meta name=twitter:card content="summary"><meta name=twitter:title content="Build Your Own Tiny Tiny RSS Service"><meta name=twitter:description content="After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader APP, so you can read RSS on all of you devices.
This post will tell you how to deploy it on your server.
Prerequisite You need to install Docker and Docker Compose before using docker-compose."><meta property="og:title" content="Build Your Own Tiny Tiny RSS Service"><meta property="og:description" content="After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader APP, so you can read RSS on all of you devices.
This post will tell you how to deploy it on your server.
Prerequisite You need to install Docker and Docker Compose before using docker-compose."><meta property="og:type" content="article"><meta property="og:url" content="https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/"><meta property="article:published_time" content="2019-06-10T00:25:00+08:00"><meta property="article:modified_time" content="2020-04-04T23:13:50+08:00"><base href=https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/><title>Build Your Own Tiny Tiny RSS Service · KK's Blog (fromkk)</title><link rel=canonical href=https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css integrity=sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://www.fromkk.com/css/coder.min.a4f332213a21ce8eb521670c614470c58923aaaf385e2a73982c31dd7642decb.css integrity="sha256-pPMyITohzo61IWcMYURwxYkjqq84XipzmCwx3XZC3ss=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://www.fromkk.com/css/custom.css><link rel=icon type=image/png href=https://www.fromkk.com/icons/icon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://www.fromkk.com/icons/icon-16x16.png sizes=16x16><meta name=generator content="Hugo 0.68.3"></head><body class=colorscheme-light><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://www.fromkk.com/>KK's Blog (fromkk)</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://www.fromkk.com/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://www.fromkk.com/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=https://www.fromkk.com/about/>About</a></li><li class=navigation-item><a class=navigation-link href=https://www.fromkk.com/posts/index.xml>RSS</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>Build Your Own Tiny Tiny RSS Service</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar"></i><time datetime=2019-06-10T00:25:00+08:00>06/10/2019</time></span>
<span class=reading-time><i class="fas fa-clock"></i>3-minute read</span></div></div></header><div><p>After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader APP, so you can read RSS on all of you devices.</p><p>This post will tell you how to deploy it on your server.</p><h2 id=prerequisite>Prerequisite</h2><p>You need to install <a href=https://docs.docker.com/install/>Docker</a> and <a href=https://docs.docker.com/compose/install/>Docker Compose</a> before using <code>docker-compose.yml</code></p><h2 id=install-docker>Install docker</h2><p>Make a new <code>ttrss</code> folder, create <code>docker-compose.yml</code> with this content:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#66d9ef>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
<span style=color:#66d9ef>services</span>:
  <span style=color:#66d9ef>database.postgres</span>:
    <span style=color:#66d9ef>image</span>: sameersbn/postgresql:latest
    <span style=color:#66d9ef>container_name</span>: postgres
    <span style=color:#66d9ef>environment</span>:
      - PG_PASSWORD=PWD <span style=color:#75715e># please change the password</span>
      - DB_EXTENSION=pg_trgm
    <span style=color:#66d9ef>volumes</span>:
      - ~/postgres/data/:/var/lib/postgresql/ <span style=color:#75715e># persist postgres data to ~/postgres/data/ on the host</span>
    <span style=color:#66d9ef>ports</span>:
      - <span style=color:#ae81ff>5433</span>:<span style=color:#ae81ff>5432</span>
    <span style=color:#66d9ef>restart</span>: always

  <span style=color:#66d9ef>service.rss</span>:
    <span style=color:#66d9ef>image</span>: wangqiru/ttrss:latest
    <span style=color:#66d9ef>container_name</span>: ttrss
    <span style=color:#66d9ef>ports</span>:
      - <span style=color:#ae81ff>181</span>:<span style=color:#ae81ff>80</span>
    <span style=color:#66d9ef>environment</span>:
      - SELF_URL_PATH=https://RSS.com/ <span style=color:#75715e># please change to your own domain</span>
      - DB_HOST=database.postgres
      - DB_PORT=<span style=color:#ae81ff>5432</span>
      - DB_NAME=ttrss
      - DB_USER=postgres
      - DB_PASS=PWD <span style=color:#75715e># please change the password</span>
      - ENABLE_PLUGINS=auth_internal,fever,api_newsplus <span style=color:#75715e># auth_internal is required. Plugins enabled here will be enabled for all users as system plugins</span>
      - SESSION_COOKIE_LIFETIME = <span style=color:#ae81ff>8760</span>
    <span style=color:#66d9ef>stdin_open</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#66d9ef>tty</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#66d9ef>restart</span>: always
    <span style=color:#66d9ef>command</span>: sh -c <span style=color:#e6db74>&#39;sh /wait-for.sh database.postgres:5432 -- php /configure-db.php &amp;&amp; exec s6-svscan /etc/s6/&#39;</span>

  <span style=color:#66d9ef>service.mercury</span>: <span style=color:#75715e># set Mercury Parser API endpoint to `service.mercury:3000` on TTRSS plugin setting page</span>
    <span style=color:#66d9ef>image</span>: wangqiru/mercury-parser-api:latest
    <span style=color:#66d9ef>container_name</span>: mercury
    <span style=color:#66d9ef>expose</span>:
      - <span style=color:#ae81ff>3000</span>
    <span style=color:#66d9ef>ports</span>:
      - <span style=color:#ae81ff>3000</span>:<span style=color:#ae81ff>3000</span>
    <span style=color:#66d9ef>restart</span>: always
</code></pre></div><p>Run this command to deploy: <code>docker-compose up -d</code>. After it finished, the TTRSS service is running on port <code>181</code>, the default account is <code>admin</code> with password <code>password</code>.</p><p>I made minor modification on the yml file, you can find the latest file <a href=https://github.com/HenryQW/Awesome-TTRSS>here</a>.</p><h2 id=nginx-configuration>Nginx configuration</h2><p>If you have a domain and you can use Nginx as reverse proxy to redirect TTRSS to the domain.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>upstream ttrssdev {
    server 127.0.0.1:181;
}

server {
    listen 80;
    server_name  RSS.com;
    return 301 https://RSS.com/$request_uri;
}

server {
    listen 443 ssl;
    gzip on;
    server_name  RSS.com;


    access_log /var/log/nginx/ttrssdev_access.log combined;
    error_log  /var/log/nginx/ttrssdev_error.log;

    location / {
        proxy_redirect off;
        proxy_pass http://ttrssdev;

        proxy_set_header  Host                $http_host;
        proxy_set_header  X-Real-IP           $remote_addr;
        proxy_set_header  X-Forwarded-Ssl     on;
        proxy_set_header  X-Forwarded-For     $proxy_add_x_forwarded_for;
        proxy_set_header  X-Forwarded-Proto   $scheme;
        proxy_set_header  X-Frame-Options     SAMEORIGIN;

        client_max_body_size        100m;
        client_body_buffer_size     128k;

        proxy_buffer_size           4k;
        proxy_buffers               4 32k;
        proxy_busy_buffers_size     64k;
        proxy_temp_file_write_size  64k;
    }
    ssl_certificate /etc/letsencrypt/live/rss.fromkk.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/rss.fromkk.com/privkey.pem; # managed by Certbot

}
</code></pre></div><p>To enable HTTPS on your website, you can use <a href=https://certbot.eff.org>certbot</a>.</p><h2 id=fever-api-and-mercury>Fever API and Mercury</h2><ul><li>Fever<ol><li>Check <code>Enable API: Allows accessing this account through the API</code> in preference</li><li>Enter a new password for fever in <code>Plugins - Fever Emulation</code></li></ol></li><li>Mecury Fulltext Extraction<ol><li>Check <code>mecury-fulltext</code> plugin in <code>Preference - Plugins</code></li><li>Set Mercury Parser API address to <code>service.mercury:3000</code> in <code>Feeds - Mercury Fulltext settings</code></li></ol></li></ul><h2 id=update>Update</h2><p>Simply run this command to update TTRSS code.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>docker-compose down
docker-compose up -d
</code></pre></div><h2 id=app-recommendation>APP recommendation</h2><p><a href=https://reederapp.com>Reeder 4</a> works great on my iPad. It&rsquo;s smooth and fast, and is worth every penny.</p><p>If you want a free APP, I suggest <a href=http://cocoacake.net/apps/fiery/>Fiery Feeds</a>. I stopped using it after ver 2.2, as it&rsquo;s so lagging. If this issue was fixed, I thought it was the biggest competitor for Reeder 4. For more alternative, read this article: <a href=https://thesweetsetup.com/apps/best-rss-app-ipad/>The Best RSS App for iPhone and iPad</a>.</p><ul><li>update 25-03-20:</li></ul><p>You can find the latest document <a href=https://ttrss.henry.wang>here</a>.</p><h2 id=ref>Ref:</h2><ol><li><a href=https://henry.wang/2018/04/25/ttrss-docker-plugins-guide.html>A ttrss setup guide - Start your own RSS aggregator today</a></li></ol></div><footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"kkblog-1"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js id=MathJax-script></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};</script></section></div><footer class=footer><section class=container>©
2020
KK
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-153788833-1','auto');ga('send','pageview');}</script></body></html>