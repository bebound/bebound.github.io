<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>KK's Blog (fromkk)</title><link>https://www.fromkk.com/</link><description>Recent content on KK's Blog (fromkk)</description><generator>Hugo</generator><language>en</language><lastBuildDate>Sat, 30 Nov 2024 20:40:14 +0800</lastBuildDate><atom:link href="https://www.fromkk.com/index.xml" rel="self" type="application/rss+xml"/><item><title>Modern pip build process (–use-pep517)</title><link>https://www.fromkk.com/posts/modern-pip-build-process-use-pep517/</link><pubDate>Sun, 24 Nov 2024 20:49:00 +0800</pubDate><guid>https://www.fromkk.com/posts/modern-pip-build-process-use-pep517/</guid><description>&lt;p>Nowadays, &lt;code>pyproject.toml&lt;/code> becomes the standard configuration file for packaging. Compare with the old &lt;code>setup.py&lt;/code>, it adds two feature pep517 and pep518.&lt;/p>
&lt;p>&lt;a href="https://peps.python.org/pep-0517/" target="_blank" rel="noreferrer">pep517&lt;/a> defines two hooks: &lt;code>build_wheel&lt;/code> and &lt;code>build_sdist&lt;/code>, which is required to build the package from source. Each build backend must implement these two hooks. It makes it possible to create other build backend such as &lt;code>flit&lt;/code> or &lt;code>poetry&lt;/code>.&lt;/p></description></item><item><title>sys.path in Python</title><link>https://www.fromkk.com/posts/sys-dot-path-in-python/</link><pubDate>Sun, 11 Aug 2024 15:56:00 +0800</pubDate><guid>https://www.fromkk.com/posts/sys-dot-path-in-python/</guid><description>&lt;p>Here is the process how &lt;code>sys.path&lt;/code> is set in Python, with some parts omitted.&lt;/p>
&lt;h2 id="python-command-line-arguments" class="relative group">Python Command Line Arguments &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#python-command-line-arguments" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>By default, as initialized upon program startup, a potentially unsafe path is prepended to &lt;code>sys.path&lt;/code>:&lt;/p></description></item><item><title>__import__ in Python</title><link>https://www.fromkk.com/posts/import-in-python/</link><pubDate>Sun, 07 Apr 2024 15:58:00 +0800</pubDate><guid>https://www.fromkk.com/posts/import-in-python/</guid><description>&lt;p>It&amp;rsquo;s known that Python&amp;rsquo;s &lt;code>import&lt;/code> statement is implemented by &lt;code>__import__&lt;/code> function. In general, if we want to import a module dynamically, we can use &lt;code>import_module&lt;/code> function, which is a wrapper around &lt;code>__import__&lt;/code>.&lt;/p>
&lt;blockquote>
&lt;p>The most important difference between these two functions is that import_module() returns the specified package or module (e.g. pkg.mod), while &lt;strong>import&lt;/strong>() returns the top-level package or module (e.g. pkg). &amp;ndash; &lt;a href="https://docs.python.org/3/library/importlib.html#importlib.import_module" target="_blank" rel="noreferrer">https://docs.python.org/3/library/importlib.html#importlib.import_module&lt;/a>&lt;/p></description></item><item><title>Improve Git speed in WSL</title><link>https://www.fromkk.com/posts/speed-up-git-speed-in-wsl/</link><pubDate>Tue, 26 Dec 2023 11:16:00 +0800</pubDate><guid>https://www.fromkk.com/posts/speed-up-git-speed-in-wsl/</guid><description>&lt;p>The disk performance in WSL2 is poor, it takes a long time to run &lt;code>git status&lt;/code> in a host&amp;rsquo;s repo. Moreover, if you set a fancy shell prompt, it will take a long time to show the prompt. This article will introduce how to speed up Git in WSL2.&lt;/p></description></item><item><title>iPod Video Review</title><link>https://www.fromkk.com/posts/ipod-video-review/</link><pubDate>Tue, 26 Dec 2023 11:16:00 +0800</pubDate><guid>https://www.fromkk.com/posts/ipod-video-review/</guid><description>&lt;p>I bought a iPod Video 5.5th Gen 80G recently. It&amp;rsquo;s only 200 Yuan (about $30) and I&amp;rsquo;m satisfied with it.&lt;/p>
&lt;h2 id="rockbox" class="relative group">Rockbox &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#rockbox" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>The original firmware supports few audio format, it even can&amp;rsquo;t play FLAC. I install rockbox on it, which support FLAC and other format and I can transfer music without using iTunes or Finder. It also support theme and plugin, which makes it more powerful.&lt;/p></description></item><item><title>Python 3.11 changes</title><link>https://www.fromkk.com/posts/python-3-dot-11-changes/</link><pubDate>Sun, 10 Dec 2023 15:24:00 +0800</pubDate><guid>https://www.fromkk.com/posts/python-3-dot-11-changes/</guid><description>&lt;p>In &lt;a href="https://github.com/Azure/azure-cli/pull/26923" target="_blank" rel="noreferrer">[Packaging] Support Python 3.11 by bebound · Pull Request #26923 · Azure/azure-cli (github.com)&lt;/a> , I bumped azure-cli to use Python 3.11. We&amp;rsquo;ve bump the dependency in other PRs, I thought it should be a small PR, but in the end, a lot of changes are made.&lt;/p></description></item><item><title>Line Ending in Git</title><link>https://www.fromkk.com/posts/line-ending-in-git/</link><pubDate>Sat, 21 Oct 2023 15:40:00 +0800</pubDate><guid>https://www.fromkk.com/posts/line-ending-in-git/</guid><description>&lt;p>When working on a project with multiple developers, the line ending can be troublesome. This article will explain how to configure line ending in Git.&lt;/p>
&lt;h2 id="basic-configuration" class="relative group">Basic configuration &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#basic-configuration" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>The line ending on Windows is &lt;code>CRLF&lt;/code>, on Linux is &lt;code>LF&lt;/code>. To prevent the line ending issue, we can set &lt;code>core.autocrlf&lt;/code> to &lt;code>true&lt;/code> on Windows to let git convert &lt;code>CRLF&lt;/code> to &lt;code>LF&lt;/code> when commit, and convert &lt;code>LF&lt;/code> to &lt;code>CRLF&lt;/code> when checkout. It is automatically configured if you install git on Windows.&lt;/p></description></item><item><title>How to copy files temporarily in Dockerfile</title><link>https://www.fromkk.com/posts/how-to-copy-files-temporarily-in-dockerfile/</link><pubDate>Thu, 24 Aug 2023 11:49:00 +0800</pubDate><guid>https://www.fromkk.com/posts/how-to-copy-files-temporarily-in-dockerfile/</guid><description>&lt;p>It&amp;rsquo;s very common to copy a local file into the container when build docker image. In general, we use &lt;code>COPY&lt;/code> command. But it creates a new layer and increase the final image size. If this is a temporal file and we don&amp;rsquo;t want users waste their storage space, how can we remove it? Here are some approaches.&lt;/p></description></item><item><title>Memory Leak in Python multiprocessing.Pool</title><link>https://www.fromkk.com/posts/memory-leak-in-python-multiprocessing-dot-pool/</link><pubDate>Wed, 16 Mar 2022 21:04:00 +0800</pubDate><guid>https://www.fromkk.com/posts/memory-leak-in-python-multiprocessing-dot-pool/</guid><description>&lt;p>There is a historical memory leak problem in our Django app and I fixed it recently. As time goes by, the memory usage of app keeps growing and so does the CPU usage.&lt;/p>

 
 
 
 
 

 
 
 
 
 
 &lt;figure class="mx-auto my-0 rounded-md">
 &lt;img src="https://www.fromkk.com/images/pool_before.png" alt="" class="mx-auto my-0 rounded-md"/>
 
 &lt;/figure>


&lt;p>After some research, I figure out the cause. Some views does not close &lt;code>multiprocessing.Pool&lt;/code> after using it. The problem disappears when I use &lt;code>Pool&lt;/code> with &lt;code>with&lt;/code> statement.&lt;/p></description></item><item><title>Emacs Chinese-related Settings</title><link>https://www.fromkk.com/posts/emacs-chinese-related-settings/</link><pubDate>Thu, 17 Feb 2022 01:27:00 +0800</pubDate><guid>https://www.fromkk.com/posts/emacs-chinese-related-settings/</guid><description>&lt;h2 id="auto-switch-input-method-in-evil" class="relative group">Auto Switch Input Method in Evil &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#auto-switch-input-method-in-evil" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>This setting makes it possible to switch input method based on the context of cursor when entering insert mode.&lt;/p>
&lt;h3 id="sis" class="relative group">sis &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#sis" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h3>&lt;p>I&amp;rsquo;m using &lt;code>sis&lt;/code> package with this configuration. You may need to install &lt;code>macism&lt;/code> if you&amp;rsquo;re not using &lt;code>railwaycat/emacsmacport&lt;/code>. More settings can be found in &lt;a href="https://github.com/laishulu/emacs-smart-input-source" target="_blank" rel="noreferrer">emacs-smart-input-source&lt;/a>.&lt;/p></description></item><item><title>QNAP TS-453Dmini Review</title><link>https://www.fromkk.com/posts/qnap-ts-453bmini-review/</link><pubDate>Wed, 19 Jan 2022 00:17:00 +0800</pubDate><guid>https://www.fromkk.com/posts/qnap-ts-453bmini-review/</guid><description>&lt;p>My first NAS is Synology DS120j, which is ARM based entry level product. It&amp;rsquo;s okay to use it for downloading and backup, but not power enough for running docker and virtual machine.&lt;/p>
&lt;p>So I bought this NAS last month, and I&amp;rsquo;m satisfied with it. Here are the advantages and disadvantages.&lt;/p></description></item><item><title>Internet Account Keeps Coming Back after deletion on MacOS</title><link>https://www.fromkk.com/posts/internet-account-keeps-coming-back-after-deletion-on-macos/</link><pubDate>Sat, 08 Jan 2022 00:09:00 +0800</pubDate><guid>https://www.fromkk.com/posts/internet-account-keeps-coming-back-after-deletion-on-macos/</guid><description>&lt;p>Today I tried to delete an inactive Internet account on system preference. It was deleted successfully but come back again after 20 seconds. This drives me nuts.&lt;/p>
&lt;p>I tried these methods, but none of them works.&lt;/p>
&lt;ul>
&lt;li>Boot in &lt;a href="https://support.apple.com/en-us/HT201262" target="_blank" rel="noreferrer">safe mode&lt;/a>, delete account.&lt;/li>
&lt;li>Delete record in &lt;code>ZACCOUNT&lt;/code> table in &lt;code>~/Library/Accounts/Accounts4.sqlite&lt;/code>.&lt;/li>
&lt;li>Delete related items in Keychain Access app.&lt;/li>
&lt;/ul>
&lt;p>Later, &lt;code>RedHatDude&lt;/code>&amp;rsquo;s answer in &lt;a href="https://discussions.apple.com/thread/252924363?login=true" target="_blank" rel="noreferrer">this post&lt;/a> gives me a clue, it looks like a iCloud sync problem. I tried to delete the account on my 3 MacBooks together. Thank goodness! It does not show up again.&lt;/p></description></item><item><title>How to disable auto strip in Charfield in Django</title><link>https://www.fromkk.com/posts/how-to-disable-auto-strip-in-charfield-in-django/</link><pubDate>Sun, 19 Dec 2021 21:20:00 +0800</pubDate><guid>https://www.fromkk.com/posts/how-to-disable-auto-strip-in-charfield-in-django/</guid><description>&lt;p>In Django, when edit field in admin page or post data to forms, the leading and tailing whitespace in &lt;code>CharField&lt;/code> and &lt;code>TextField&lt;/code> are removed.&lt;/p>
&lt;p>The reason is &lt;code>strip=True&lt;/code> parameter in &lt;code>forms.CharField&lt;/code>, which is added in Djagno 1.9. You can see the discussion in &lt;a href="https://code.djangoproject.com/ticket/4960" target="_blank" rel="noreferrer">django tiket #4960&lt;/a> and here is &lt;a href="https://github.com/django/django/blob/4ce59f602ed28320caf3035212cb4d1c5430da2b/django/forms/fields.py#L211" target="_blank" rel="noreferrer">source code&lt;/a>. &lt;code>models.CharField&lt;/code> and &lt;code>models.TextField&lt;/code> use &lt;code>formfield()&lt;/code> to create form to interact with user, then both of them eventually create a &lt;code>forms.CharField&lt;/code>&lt;/p></description></item><item><title>Using JSONField before Django 3.1</title><link>https://www.fromkk.com/posts/using-jsonfield-before-django-3-dot-1/</link><pubDate>Sat, 11 Sep 2021 21:12:00 +0800</pubDate><guid>https://www.fromkk.com/posts/using-jsonfield-before-django-3-dot-1/</guid><description>&lt;p>In Django 3.1, Django support save python data into database as JSON encoded data and it is also possible to make query based on field value in JSONField. The detailed usage can be found &lt;a href="https://docs.djangoproject.com/en/3.2/topics/db/queries/#querying-jsonfield" target="_blank" rel="noreferrer">here&lt;/a>. If you are using older version and want to try this feature. Though there are many packages ported this function, I recommend &lt;a href="https://github.com/laymonage/django-jsonfield-backport" target="_blank" rel="noreferrer">django-jsonfield-backport&lt;/a>.&lt;/p></description></item><item><title>Dynamic Allocate Executors when Executing Jobs in Spark</title><link>https://www.fromkk.com/posts/dynamic-allocate-executors-when-executing-jobs-in-spark/</link><pubDate>Sun, 18 Jul 2021 16:52:00 +0800</pubDate><guid>https://www.fromkk.com/posts/dynamic-allocate-executors-when-executing-jobs-in-spark/</guid><description>&lt;p>I wrote a Spark program to process logs. The number of logs always changes as time goes by. To ensure logs can be processed instantly, the number of executors is calculated by the maximum of logs per minutes. As a consequence, the CPU usage is low in executors. In order to decrease resource waste, I tried to find a way to schedule executors during the execution of program.&lt;/p></description></item><item><title>Improve Kafka throughput</title><link>https://www.fromkk.com/posts/improve-kafka-throughput/</link><pubDate>Fri, 28 May 2021 00:57:00 +0800</pubDate><guid>https://www.fromkk.com/posts/improve-kafka-throughput/</guid><description>&lt;p>Kafka is a high-performance and scalable messaging system. Sometimes when handling big data. The default configuration may limit the maximum performance. In this article, I&amp;rsquo;ll explain how messages are generate and saved in Kafka, and how to improve performance by changing configuration.&lt;/p></description></item><item><title>Fix Error: Cask 'java' is unavailable in Homebrew</title><link>https://www.fromkk.com/posts/fix-error-cask-java-is-unavailable-in-homebrew/</link><pubDate>Sun, 07 Mar 2021 00:10:00 +0800</pubDate><guid>https://www.fromkk.com/posts/fix-error-cask-java-is-unavailable-in-homebrew/</guid><description>&lt;p>After update brew to latest version, when calling &lt;code>cask&lt;/code> related command, it always outputs &lt;code>Error: Cask 'java' is unavailable: No Cask with this name exists.&lt;/code>, such as &lt;code>brew list --cask&lt;/code>. However, the &lt;code>brew&lt;/code> command works.&lt;/p>
&lt;p>After doing some research, I found &lt;a href="https://github.com/Homebrew/homebrew-cask/pull/72284" target="_blank" rel="noreferrer">Java has been moved to homebrew/core&lt;/a>. This makes sense now. I installed java by cask, but it&amp;rsquo;s not available now and cask throw this error. If I uninstall java from cask, the error should disappear.&lt;/p></description></item><item><title>Timezone in JVM</title><link>https://www.fromkk.com/posts/timezone-in-jvm/</link><pubDate>Sun, 18 Oct 2020 23:49:00 +0800</pubDate><guid>https://www.fromkk.com/posts/timezone-in-jvm/</guid><description>&lt;p>I wrote a Scala code to get the current time. However, the output is different on the development server and docker.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-scala" data-lang="scala">&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="nn">java.util.Calendar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">println&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nc">Calendar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getInstance&lt;/span>&lt;span class="o">().&lt;/span>&lt;span class="n">getTime&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>On my development server, it outputs &lt;code>Sun Oct 18 18:01:01 CST 2020&lt;/code>, but in docker, it print a UTC time.&lt;/p></description></item><item><title>Using cibuildwheel to Create Python Wheels</title><link>https://www.fromkk.com/posts/using-cibuildwheel-to-create-python-wheels/</link><pubDate>Wed, 29 Jul 2020 22:53:00 +0800</pubDate><guid>https://www.fromkk.com/posts/using-cibuildwheel-to-create-python-wheels/</guid><description>&lt;p>Have you ever tried to install &lt;code>MySQL-python&lt;/code>? It contains the C code and need to compile the code while install the package. You have to follow the steps in this articles: &lt;a href="https://ruddra.com/install-mysqlclient-macos/" target="_blank" rel="noreferrer">Install MySQL and MySQLClient(Python) in MacOS&lt;/a>. Things get worse if you are using Windows.&lt;/p></description></item><item><title>Retrieve Large Dataset in Elasticsearch</title><link>https://www.fromkk.com/posts/retrieve-large-dataset-in-elasticsearch/</link><pubDate>Sun, 21 Jun 2020 20:33:00 +0800</pubDate><guid>https://www.fromkk.com/posts/retrieve-large-dataset-in-elasticsearch/</guid><description>&lt;p>It&amp;rsquo;s easy to get small dataset from Elasticsearch by using &lt;code>size&lt;/code> and &lt;code>from&lt;/code>. However, it&amp;rsquo;s impossible to retrieve large dataset in the same way.&lt;/p>
&lt;h2 id="deep-paging-problem" class="relative group">Deep Paging Problem &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#deep-paging-problem" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>As we know it, Elasticsearch data is organised into indexes, which is a logical namespace, and the real data is stored into physical shards. Each shard is an instance of Lucene. There are two kind of shards, primary shards and replica shards. Replica shards is the copy of primary shards in case nodes or shards fail. By distributing documents in an index across multiple shards, and distributing those shards across multiple nodes, Elasticsearch can ensure redundancy and scalability. By default, Elasticsearch create &lt;strong>5&lt;/strong> primary shards and one replica shard for each primary shards.&lt;/p></description></item><item><title>Program Crash Caused by CPU Instruction</title><link>https://www.fromkk.com/posts/program-crash-caused-by-cpu-instruction/</link><pubDate>Sun, 17 May 2020 17:36:00 +0800</pubDate><guid>https://www.fromkk.com/posts/program-crash-caused-by-cpu-instruction/</guid><description>&lt;p>It&amp;rsquo;s inevitable to dealing with bugs in coding career. The main part of coding are implementing new features, fixing bugs and improving performance. For me, there are two kinds of bugs that is difficult to tackle: those are hard to reproduce, and those occur in code not wrote by you.&lt;/p></description></item><item><title>C-m, RET and Return Key in Emacs</title><link>https://www.fromkk.com/posts/c-m-ret-and-return-key-in-emacs/</link><pubDate>Sat, 11 Apr 2020 21:23:00 +0800</pubDate><guid>https://www.fromkk.com/posts/c-m-ret-and-return-key-in-emacs/</guid><description>&lt;p>I use Emacs to write blog. In the recent update, I found &lt;code>M-RET&lt;/code> no longer behave as leader key in org mode, but behave as &lt;code>org-meta-return&lt;/code>. And even more strange is that in other mode, it behave as leader key. And &lt;code>M-RET&lt;/code> also works in terminal in org mode. In GUI, pressing &lt;code>C-M-m&lt;/code> can trigger leader key.&lt;/p></description></item><item><title>Import custom package or module in PySpark</title><link>https://www.fromkk.com/posts/import-custom-package-or-module-in-pyspark/</link><pubDate>Thu, 02 Apr 2020 22:24:00 +0800</pubDate><guid>https://www.fromkk.com/posts/import-custom-package-or-module-in-pyspark/</guid><description>&lt;p>First zip all of the dependencies into zip file like this. Then you can use one of the following methods to import it.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-nil" data-lang="nil">|-- kk.zip
| |-- kk.py
&lt;/code>&lt;/pre>&lt;h2 id="using-py-files-in-spark-submit" class="relative group">Using &amp;ndash;py-files in spark-submit &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#using-py-files-in-spark-submit" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>When submit spark job, add &lt;code>--py-files=kk.zip&lt;/code> parameter. &lt;code>kk.zip&lt;/code> will be distributed with the main scrip file, and &lt;code>kk.zip&lt;/code> will be inserted at the beginning of &lt;code>PATH&lt;/code> environment variable.&lt;/p></description></item><item><title>Time boundary in InfluxDB Group by Time Statement</title><link>https://www.fromkk.com/posts/time-boundary-in-influxdb-group-by-time-statement/</link><pubDate>Sun, 29 Mar 2020 22:30:00 +0800</pubDate><guid>https://www.fromkk.com/posts/time-boundary-in-influxdb-group-by-time-statement/</guid><description>&lt;p>These days I use InfluxDB to save some time series data. I love these features it provides:&lt;/p>
&lt;h4 id="high-performance" class="relative group">High Performance &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#high-performance" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h4>&lt;p>According to to it&amp;rsquo;s &lt;a href="https://docs.influxdata.com/influxdb/v1.7/guides/hardware_sizing/#single-node-or-cluster" target="_blank" rel="noreferrer">hardware guide&lt;/a>, a single node will support more than 750k point write per second, 100 moderate queries per second and 10M series cardinality.&lt;/p></description></item><item><title>C3 Linearization and Python MRO(Method Resolution Order)</title><link>https://www.fromkk.com/posts/c3-linearization-and-python-mro--method-resolution-order/</link><pubDate>Sat, 14 Mar 2020 17:37:00 +0800</pubDate><guid>https://www.fromkk.com/posts/c3-linearization-and-python-mro--method-resolution-order/</guid><description>&lt;p>Python supports multiple inheritance, its class can be derived from more than one base classes. If the specified attribute or methods was not found in current class, how to decide the search sequence from superclasses? In simple scenario, we know left-to right, bottom to up. But when the inheritance hierarchy become complicated, it&amp;rsquo;s not easy to answer by intuition.&lt;/p></description></item><item><title>Difference between Value and Pointer variable in Defer in Go</title><link>https://www.fromkk.com/posts/difference-between-value-and-pointer-variable-in-defer-in-go/</link><pubDate>Thu, 19 Dec 2019 22:33:00 +0800</pubDate><guid>https://www.fromkk.com/posts/difference-between-value-and-pointer-variable-in-defer-in-go/</guid><description>&lt;p>&lt;code>defer&lt;/code> is a useful function to do cleanup, as it will execute in LIFO order before the surrounding function returns. If you don&amp;rsquo;t know how it works, sometimes the execution result may confuse you.&lt;/p>
&lt;h2 id="how-it-works-and-why-value-or-pointer-receiver-matters" class="relative group">How it Works and Why Value or Pointer Receiver Matters &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#how-it-works-and-why-value-or-pointer-receiver-matters" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>I found an interesting code on &lt;a href="https://stackoverflow.com/questions/28893586/golang-defer-clarification" target="_blank" rel="noreferrer">Stack Overflow&lt;/a>:&lt;/p></description></item><item><title>Near-duplicate with SimHash</title><link>https://www.fromkk.com/posts/near-duplicate-with-simhash/</link><pubDate>Wed, 04 Dec 2019 00:16:00 +0800</pubDate><guid>https://www.fromkk.com/posts/near-duplicate-with-simhash/</guid><description>&lt;p>Before talking about &lt;strong>SimHash&lt;/strong>, let&amp;rsquo;s review some other methods which can also identify duplication.&lt;/p>
&lt;h2 id="longest-common-subsequence--lcs" class="relative group">Longest Common Subsequence(LCS) &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#longest-common-subsequence--lcs" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>This is the algorithm used by &lt;code>diff&lt;/code> command. It is also &lt;strong>edit distance&lt;/strong> with insertion and deletion as the only two edit operations.&lt;/p></description></item><item><title>Jaeger Code Structure</title><link>https://www.fromkk.com/posts/jaeger-code-structure/</link><pubDate>Sun, 22 Sep 2019 17:07:00 +0800</pubDate><guid>https://www.fromkk.com/posts/jaeger-code-structure/</guid><description>&lt;p>Here is the main logic for jaeger agent and jaeger collector. (Based on &lt;a href="https://github.com/jaegertracing/jaeger" target="_blank" rel="noreferrer">jaeger&lt;/a> 1.13.1)&lt;/p>

 
 
 
 
 

 
 
 
 
 
 &lt;figure class="mx-auto my-0 rounded-md">
 &lt;img src="https://www.fromkk.com/images/jaeger.svg" alt="" class="mx-auto my-0 rounded-md"/>
 
 &lt;/figure>


&lt;h2 id="jaeger-agent" class="relative group">Jaeger Agent &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#jaeger-agent" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>Collect UDP packet from 6831 port, convert it to &lt;code>model.Span&lt;/code>, send to collector by gRPC&lt;/p></description></item><item><title>The Annotated The Annotated Transformer</title><link>https://www.fromkk.com/posts/the-annotated-the-annotated-transformer/</link><pubDate>Sun, 01 Sep 2019 16:00:00 +0800</pubDate><guid>https://www.fromkk.com/posts/the-annotated-the-annotated-transformer/</guid><description>&lt;p>Thanks for the articles I list at the end of this post, I understand how transformers works. These posts are comprehensive, but there are some points that confused me.&lt;/p>
&lt;p>First, this is the graph that was referenced by almost all of the post related to Transformer.&lt;/p></description></item><item><title>Different types of Attention</title><link>https://www.fromkk.com/posts/different-types-of-attention/</link><pubDate>Mon, 15 Jul 2019 00:16:00 +0800</pubDate><guid>https://www.fromkk.com/posts/different-types-of-attention/</guid><description>&lt;p>\(s_t\) and \(h_i\) are source hidden states and target hidden state, the shape is &lt;code>(n,1)&lt;/code>. \(c_t\) is the final context vector, and \(\alpha_{t,s}\) is alignment score.&lt;/p>
&lt;p>\[\begin{aligned}
c_t&amp;amp;=\sum_{i=1}^n \alpha_{t,s}h_i \\
\alpha_{t,s}&amp;amp;= \frac{\exp(score(s_t,h_i))}{\sum_{i=1}^n \exp(score(s_t,h_i))}
\end{aligned}\]&lt;/p>
&lt;h2 id="global--soft--vs-local--hard" class="relative group">Global(Soft) VS Local(Hard) &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#global--soft--vs-local--hard" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>Global Attention takes all source hidden states into account, and local attention only use part of the source hidden states.&lt;/p></description></item><item><title>Torchtext snippets</title><link>https://www.fromkk.com/posts/torchtext-snippets/</link><pubDate>Mon, 01 Jul 2019 21:28:00 +0800</pubDate><guid>https://www.fromkk.com/posts/torchtext-snippets/</guid><description>&lt;h2 id="load-separate-files" class="relative group">Load separate files &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#load-separate-files" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>&lt;code>data.Field&lt;/code> parameters is &lt;a href="https://torchtext.readthedocs.io/en/latest/data.html#torchtext.data.Field" target="_blank" rel="noreferrer">here&lt;/a>.&lt;/p>
&lt;p>When calling &lt;code>build_vocab&lt;/code>, torchtext will add &lt;code>&amp;lt;unk&amp;gt;&lt;/code> in vocabulary list. Set &lt;code>unk_token=None&lt;/code> if you want to remove it. If &lt;code>sequential=True&lt;/code> (default), it will add &lt;code>&amp;lt;pad&amp;gt;&lt;/code> in vocab. &lt;code>&amp;lt;unk&amp;gt;&lt;/code> and &lt;code>&amp;lt;pad&amp;gt;&lt;/code> will add at the beginning of vocabulary list by default.&lt;/p></description></item><item><title>Build Your Own Tiny Tiny RSS Service</title><link>https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/</link><pubDate>Mon, 10 Jun 2019 00:25:00 +0800</pubDate><guid>https://www.fromkk.com/posts/build-your-own-tiny-tiny-rss-service/</guid><description>&lt;p>After Inoreader change the free plan, which limit the max subscription to 150, I begin to find an alternative. Finally, I found Tiny Tiny RSS. It has a nice website and has the fever API Plugin which was supported by most of the RSS reader app, so you can read RSS on all of you devices.&lt;/p></description></item><item><title>Preview LaTeX in Org Mode with Emacs in MacOS</title><link>https://www.fromkk.com/posts/preview-latex-in-org-mode-with-emacs-in-macos/</link><pubDate>Sun, 12 May 2019 20:26:00 +0800</pubDate><guid>https://www.fromkk.com/posts/preview-latex-in-org-mode-with-emacs-in-macos/</guid><description>&lt;h2 id="using-the-right-emacs-version" class="relative group">Using the right Emacs Version &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#using-the-right-emacs-version" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>I failed to preview LaTeX with &lt;code>emacs-plus&lt;/code>. If you have installed &lt;code>d12frosted/emacs-plus&lt;/code>, uninstall it and use &lt;code>emacs-mac&lt;/code>.&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-nil" data-lang="nil">brew tap railwaycat/emacsmacport
brew install emacs-mac
&lt;/code>&lt;/pre>&lt;p>If you like the fancy spacemacs icon, install it with cask: &lt;code>brew cask install emacs-mac-spacemacs-icon&lt;/code>&lt;/p></description></item><item><title>Using Dueling DQN to Play Flappy Bird</title><link>https://www.fromkk.com/posts/using-ddqn-to-play-flappy-bird/</link><pubDate>Sun, 14 Apr 2019 17:10:00 +0800</pubDate><guid>https://www.fromkk.com/posts/using-ddqn-to-play-flappy-bird/</guid><description>&lt;p>PyTorch provide a simple DQN implementation to solve the cartpole game. However, the code is incorrect, it diverges after training (It has been discussed &lt;a href="https://discuss.pytorch.org/t/dqn-example-from-pytorch-diverged/4123" target="_blank" rel="noreferrer">here&lt;/a>).&lt;/p>
&lt;p>The official code&amp;rsquo;s training data is below, it&amp;rsquo;s high score is about 50 and finally diverges.&lt;/p></description></item><item><title>Circular Import in Python</title><link>https://www.fromkk.com/posts/circular-import-in-python/</link><pubDate>Sun, 10 Mar 2019 10:59:00 +0800</pubDate><guid>https://www.fromkk.com/posts/circular-import-in-python/</guid><description>&lt;p>Recently, I found a really good example code for Python circular import, and I&amp;rsquo;d like to record it here.&lt;/p>
&lt;p>Here is the code:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python3" data-lang="python3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># X.py&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">X1&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;x1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">Y&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Y2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">X2&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;x2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python3" data-lang="python3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Y.py&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">Y1&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;y1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">X&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">X1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">Y2&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;y2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Guess what will happen if you run &lt;code>python X.py&lt;/code> and &lt;code>python Y.py&lt;/code>?&lt;/p></description></item><item><title>Python Dictionary Implementation</title><link>https://www.fromkk.com/posts/python-dictionary-implementation/</link><pubDate>Sun, 17 Feb 2019 21:48:00 +0800</pubDate><guid>https://www.fromkk.com/posts/python-dictionary-implementation/</guid><description>&lt;h2 id="overview" class="relative group">Overview &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#overview" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;ol>
&lt;li>CPython allocation memory to save dictionary, the initial table size is 8, entries are saved as &lt;code>&amp;lt;hash,key,value&amp;gt;&lt;/code> in each slot(The slot content changed after Python 3.6).&lt;/li>
&lt;li>When a new key is added, python use &lt;code>i = hash(key) &amp;amp; mask&lt;/code> where &lt;code>mask=table_size-1&lt;/code> to calculate which slot it should be placed. If the slot is occupied, CPython using a probing algorithm to find the empty slot to store new item.&lt;/li>
&lt;li>When 2/3 of the table is full, the table will be resized.&lt;/li>
&lt;li>When getting item from dictionary, both &lt;code>hash&lt;/code> and &lt;code>key&lt;/code> must be equal.&lt;/li>
&lt;/ol>
&lt;h2 id="resizing" class="relative group">Resizing &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#resizing" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>When elements size is below 50000, the table size will increase by a factor of 4 based on used slots. Otherwise, it will increase by a factor of 2. The dictionary size is always \(2^{n}\).&lt;/p></description></item><item><title>About</title><link>https://www.fromkk.com/about/</link><pubDate>Fri, 01 Feb 2019 00:00:00 +0000</pubDate><guid>https://www.fromkk.com/about/</guid><description>&lt;p>This blog is powered by &lt;a href="https://gohugo.io" target="_blank" rel="noreferrer">hugo&lt;/a>, and the theme is &lt;a href="https://github.com/jpanther/congo" target="_blank" rel="noreferrer">congo&lt;/a>.&lt;/p>
&lt;p>I use &lt;a href="https://spacemacs.org" target="_blank" rel="noreferrer">Spacemacs&lt;/a> and &lt;a href="https://orgmode.org" target="_blank" rel="noreferrer">org-mode&lt;/a> to write post. Then use &lt;a href="https://ox-hugo.scripter.co" target="_blank" rel="noreferrer">ox-hugo&lt;/a> to export org file to markdown. Finally &lt;a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/" target="_blank" rel="noreferrer">GitHub Action&lt;/a> will build the blog automatically after I push commit to GitHub.&lt;/p></description></item><item><title>TextCNN with PyTorch and Torchtext on Colab</title><link>https://www.fromkk.com/posts/textcnn-with-pytorch-and-torchtext-on-colab/</link><pubDate>Mon, 03 Dec 2018 15:47:00 +0800</pubDate><guid>https://www.fromkk.com/posts/textcnn-with-pytorch-and-torchtext-on-colab/</guid><description>&lt;p>&lt;a href="https://pytorch.org" target="_blank" rel="noreferrer">PyTorch&lt;/a> is a really powerful framework to build the machine learning models. Although some features is missing when compared with TensorFlow (For example, the early stop function, History to draw plot), its code style is more intuitive.&lt;/p>
&lt;p>&lt;a href="https://github.com/pytorch/text" target="_blank" rel="noreferrer">Torchtext&lt;/a> is a NLP package which is also made by &lt;code>pytorch&lt;/code> team. It provide a way to read text, processing and iterate the texts.&lt;/p></description></item><item><title>CSRF in Django</title><link>https://www.fromkk.com/posts/csrf-in-django/</link><pubDate>Wed, 07 Nov 2018 13:58:00 +0800</pubDate><guid>https://www.fromkk.com/posts/csrf-in-django/</guid><description>&lt;p>CSRF(Cross-site request forgery) is a way to generate fake user request to target website. For example, on a malicious website A, there is a button, click it will send request to &lt;a href="https://www.B.com/logout" target="_blank" rel="noreferrer">www.B.com/logout&lt;/a>. When the user click this button, he will logout from website B unconsciously. Logout is not a big problem, but malicious website can generate more dangerous request like money transfer.&lt;/p></description></item><item><title>Create Node Benchmark in Py2neo</title><link>https://www.fromkk.com/posts/create-node-benchmark-in-py2neo/</link><pubDate>Mon, 05 Nov 2018 15:55:00 +0800</pubDate><guid>https://www.fromkk.com/posts/create-node-benchmark-in-py2neo/</guid><description>&lt;p>Recently, I&amp;rsquo;m working on a neo4j project. I use &lt;code>Py2neo&lt;/code> to interact with graph db. Although &lt;code>Py2neo&lt;/code> is a very Pythonic and easy to use, its performance is really poor. Sometimes I have to manually write cypher statement by myself if I can&amp;rsquo;t bear with the slow execution. Here is a small script which I use to compare the performance of 4 different ways to insert nodes.&lt;/p></description></item><item><title>Deploy Nikola Org Mode on Travis</title><link>https://www.fromkk.com/posts/deploy-nikola-org-mode-on-travis/</link><pubDate>Sat, 03 Nov 2018 21:20:00 +0800</pubDate><guid>https://www.fromkk.com/posts/deploy-nikola-org-mode-on-travis/</guid><description>&lt;p>Recently, I enjoy using &lt;code>Spacemacs&lt;/code>, so I decided to switch to org file from Markdown for writing blog. After several attempts, I managed to let Travis convert org file to HTML. Here are the steps.&lt;/p>
&lt;h2 id="install-org-mode-plugin" class="relative group">Install Org Mode plugin &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#install-org-mode-plugin" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>First you need to install Org Mode plugin on your computer following the official guide: &lt;a href="https://plugins.getnikola.com/v8/orgmode/" target="_blank" rel="noreferrer">Nikola orgmode plugin&lt;/a>.&lt;/p></description></item><item><title>Using Chinese Characters in Matplotlib</title><link>https://www.fromkk.com/posts/using-chinese-characters-in-matplotlib/</link><pubDate>Thu, 04 Oct 2018 15:53:00 +0800</pubDate><guid>https://www.fromkk.com/posts/using-chinese-characters-in-matplotlib/</guid><description>&lt;p>After searching from Google, here is easiest solution. This should also works on other languages:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">matplotlib.pyplot&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">plt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">%&lt;/span>&lt;span class="n">matplotlib&lt;/span> &lt;span class="n">inline&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">%&lt;/span>&lt;span class="n">config&lt;/span> &lt;span class="n">InlineBackend&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">figure_format&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;retina&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">matplotlib.font_manager&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">fm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/System/Library/Fonts/PingFang.ttc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">prop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FontProperties&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;你好&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">fontproperties&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">prop&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">plt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Output:&lt;/p>

 
 
 
 
 

 
 
 
 
 
 &lt;figure class="mx-auto my-0 rounded-md">
 &lt;img src="https://www.fromkk.com/images/matplot_chinese.png" alt="" class="mx-auto my-0 rounded-md"/>
 
 &lt;/figure></description></item><item><title>LSTM and GRU</title><link>https://www.fromkk.com/posts/lstm-and-gru/</link><pubDate>Sun, 22 Apr 2018 14:39:00 +0800</pubDate><guid>https://www.fromkk.com/posts/lstm-and-gru/</guid><description>&lt;h2 id="lstm" class="relative group">LSTM &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#lstm" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>The avoid the problem of vanishing gradient and exploding gradient in vanilla RNN, LSTM was published, which can remember information for longer periods of time.&lt;/p>
&lt;p>Here is the structure of LSTM:&lt;/p></description></item><item><title>Models and Architectures in Word2vec</title><link>https://www.fromkk.com/posts/models-and-architechtures-in-word2vec/</link><pubDate>Fri, 05 Jan 2018 15:14:00 +0800</pubDate><guid>https://www.fromkk.com/posts/models-and-architechtures-in-word2vec/</guid><description>&lt;p>Generally, &lt;code>word2vec&lt;/code> is a language model to predict the words probability based on the context. When build the model, it create word embedding for each word, and word embedding is widely used in many NLP tasks.&lt;/p>
&lt;h2 id="models" class="relative group">Models &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#models" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;h3 id="cbow--continuous-bag-of-words" class="relative group">CBOW (Continuous Bag of Words) &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#cbow--continuous-bag-of-words" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h3>&lt;p>Use the context to predict the probability of current word. (In the picture, the word is encoded with one-hot encoding, \(W_{V*N}\) is word embedding, and \(W_{V*N}^{&amp;rsquo;}\), the output weight matrix in hidden layer, is same as \(\hat{\upsilon}\) in following equations)&lt;/p></description></item><item><title>Semi-supervised text classification using doc2vec and label spreading</title><link>https://www.fromkk.com/posts/semi-supervised-text-classification-using-doc2vec-and-label-spreading/</link><pubDate>Sun, 10 Sep 2017 15:29:00 +0800</pubDate><guid>https://www.fromkk.com/posts/semi-supervised-text-classification-using-doc2vec-and-label-spreading/</guid><description>&lt;p>Here is a simple way to classify text without much human effort and get a impressive performance.&lt;/p>
&lt;p>It can be divided into two steps:&lt;/p>
&lt;ol>
&lt;li>Get train data by using keyword classification&lt;/li>
&lt;li>Generate a more accurate classification model by using doc2vec and label spreading&lt;/li>
&lt;/ol>
&lt;h2 id="keyword-based-classification" class="relative group">Keyword-based Classification &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#keyword-based-classification" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>Keyword based classification is a simple but effective method. Extracting the target keyword is a monotonous work. I use this method to automatic extract keyword candidate.&lt;/p></description></item><item><title>Parameters in doc2vec</title><link>https://www.fromkk.com/posts/parameters-in-dov2vec/</link><pubDate>Thu, 03 Aug 2017 15:20:00 +0800</pubDate><guid>https://www.fromkk.com/posts/parameters-in-dov2vec/</guid><description>&lt;p>Here are some parameter in &lt;code>gensim&lt;/code>&amp;rsquo;s &lt;code>doc2vec&lt;/code> class.&lt;/p>
&lt;h3 id="window" class="relative group">window &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#window" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h3>&lt;p>window is the maximum distance between the predicted word and context words used for prediction within a document. It will look behind and ahead.&lt;/p></description></item><item><title>Brief Introduction of Label Propagation Algorithm</title><link>https://www.fromkk.com/posts/brief-introduction-of-label-propagation-algorithm/</link><pubDate>Sun, 16 Jul 2017 21:45:00 +0800</pubDate><guid>https://www.fromkk.com/posts/brief-introduction-of-label-propagation-algorithm/</guid><description>&lt;p>As I said before, I&amp;rsquo;m working on a text classification project. I use &lt;code>doc2vec&lt;/code> to convert text into vectors, then I use LPA to classify the vectors.&lt;/p>
&lt;p>LPA is a simple, effective semi-supervised algorithm. It can use the density of unlabeled data to find a hyperplane to split the data.&lt;/p></description></item><item><title>Enable C Extension for gensim on Windows</title><link>https://www.fromkk.com/posts/enable-c-extension-for-gensim-on-windows/</link><pubDate>Sat, 10 Jun 2017 14:43:00 +0800</pubDate><guid>https://www.fromkk.com/posts/enable-c-extension-for-gensim-on-windows/</guid><description>&lt;p>These days, I’m working on some text classification works, and I use &lt;code>gensim&lt;/code> ’s &lt;code>doc2vec&lt;/code> function.&lt;/p>
&lt;p>When using gensim, it shows this warning message:&lt;/p>
&lt;p>&lt;code>C extension not loaded for Word2Vec, training will be slow.&lt;/code>&lt;/p>
&lt;p>I search this on Internet and found that gensim has rewrite some part of the code using &lt;code>cython&lt;/code> rather than &lt;code>numpy&lt;/code> to get better performance. A compiler is required to enable this feature.&lt;/p></description></item><item><title>Some Useful Shell Tools</title><link>https://www.fromkk.com/posts/some-useful-shell-tools/</link><pubDate>Sun, 07 May 2017 15:34:00 +0800</pubDate><guid>https://www.fromkk.com/posts/some-useful-shell-tools/</guid><description>&lt;p>Here are some shell tools I use, which can boost your productivity. &lt;a href="https://github.com/johnalanwoods/maintained-modern-unix" target="_blank" rel="noreferrer">Mordern-unix&lt;/a> is a great repo that list lots of modern unix tools.&lt;/p>
&lt;h2 id="prezto" class="relative group">&lt;a href="https://github.com/sorin-ionescu/prezto" target="_blank" rel="noreferrer">Prezto&lt;/a> &lt;span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100">&lt;a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#prezto" aria-label="Anchor">#&lt;/a>&lt;/span>&lt;/h2>&lt;p>A zsh configuration framework. Provides auto completion, prompt theme and lots of modules to work with other useful tools. I extremely love the &lt;code>agnoster&lt;/code> theme.&lt;/p></description></item><item><title>Start</title><link>https://www.fromkk.com/posts/start/</link><pubDate>Tue, 18 Apr 2017 15:46:00 +0800</pubDate><guid>https://www.fromkk.com/posts/start/</guid><description>&lt;p>Over the years, I have read so many programmers’ blogs, which has helped me a lot. Now I think it’s the time to start my own blog.&lt;/p>
&lt;p>I hope this can enforce myself to review what I have learned, and it would even be better if someone can benefit from it.&lt;/p></description></item></channel></rss>